<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Sportovní zápasy</title>
</head>
<body>
  <h1>Seznam zápasů  6 hodin</h1>
  <ul id="matches"></ul>

  <script>
    const originalApiUrl = 'https://api.b365api.com/v3/events/upcoming?sport_id=92&token=223543-zHPMwtDqu7Sduj';
    const apiUrl = 'https://api.allorigins.win/get?url=' + encodeURIComponent(originalApiUrl);

    async function fetchMatches() {
      try {
        const response = await fetch(apiUrl);
        const textData = await response.json();
        const data = JSON.parse(textData.contents);

        const matchesList = document.getElementById('matches');
        matchesList.innerHTML = '';

       const HOURS_AHEAD = 6; // počet hodin dopředu

data.results
  .filter(match => match.league.id === "22307") // filtr podle ligy
  .filter(match => {
    const matchTime = match.time * 1000; // Unix timestamp v ms
    const now = Date.now();
    const maxTime = now + HOURS_AHEAD * 60 * 60 * 1000; // čas do X hodin dopředu
    return matchTime <= maxTime;
  })
  .forEach(match => {
    const time = new Date(match.time * 1000).toLocaleString();
    const league = match.league.name;
    const home = match.home.name;
    const away = match.away.name;

    const li = document.createElement('li');
    li.textContent = `${time} - ${league}: ${home} vs ${away}`;
    matchesList.appendChild(li);
  });

      } catch (error) {
        console.error('Chyba při načítání API:', error);
      }
    }

    fetchMatches();
  </script>
</body>
</html>
